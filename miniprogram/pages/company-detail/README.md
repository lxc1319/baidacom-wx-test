# 物流公司详情页

## 页面概述

物流公司详情页展示物流公司的完整信息，包括公司介绍、网点查询、线路查询、消息通知和联系方式等功能。

## 功能模块

### 1. 顶部轮播图区域
- 展示物流公司的宣传图片
- 支持自动播放和手势滑动
- 点击可跳转到相关页面

### 2. 语音播报区域
- 显示公司最新通知公告
- 使用swiper实现垂直滚动效果
- 点击跳转到通知公告列表页

### 3. 运单查询区域
- 支持手动输入运单号查询
- 支持扫码查询
- 只查询当前公司的运单

### 4. 标签页导航
包含5个标签页：
- 品牌简介
- 网点查询
- 线路查询
- 消息通知
- 联系我们

## 标签页详细说明

### 品牌简介标签页
- 显示公司Logo（如有）
- 显示公司名称
- 显示公司详细介绍
- 支持长文本滚动查看

### 网点查询标签页
- 搜索框支持实时筛选网点
- 显示网点名称、联系电话、网点地址
- 点击电话可拨打
- 点击地址可打开地图导航
- 网点数据从线路的loadBranch和discBranch中提取并去重

**重要说明**：
- 网点电话字段使用 `branchMobile`（不是 branchPhone）
- 网点去重使用网点ID作为唯一标识

### 线路查询标签页
- 双输入框筛选（始发城镇、到达城镇）
- 支持城镇下拉列表选择
- 显示线路路由、始发网点、到达网点、线路时效、增值服务
- 支持清除按钮快速清空筛选条件

### 消息通知标签页
- 显示站内信列表
- 点击"阅读详情"跳转到消息详情页
- 支持下拉刷新和上拉加载更多
- 需要登录才能查看

### 联系我们标签页
- 总部地址（点击打开地图）
- 联系人信息
- 联系电话（客服电话、业务经理、咨询电话）
- 公司网址（点击复制）
- 邮箱地址（点击复制）

## 数据接口

### 公司信息
- `GET /com/company/get-by-id?id={id}` - 获取公司详情（需权限）
- `GET /com/company/innerCompanyList` - 获取公司列表（备用接口）

### 轮播图
- `GET /com/company-banner/list?companyId={id}` - 获取公司轮播图

### 通知公告
- `GET /com/company-notice/page?companyId={id}&pageSize=1` - 获取最新通知

### 线路和网点
- `GET /com/route-info/page?companyId={id}` - 获取线路信息（包含网点）

### 运单查询
- `GET /com/waybill/searchByCompanyId?waybillCode={code}&companyId={id}` - 查询公司运单

### 站内信
- `GET /system/notify-message/my-page` - 获取站内信列表（需登录）

## 页面交互

### 下拉刷新
- 刷新公司信息
- 刷新轮播图
- 刷新通知公告
- 刷新线路和网点数据
- 如果在消息通知标签页，刷新消息列表

### 上拉加载
- 仅在消息通知标签页生效
- 自动加载更多消息

### 拨打电话
- 使用 `wx.makePhoneCall` API
- 支持网点电话、公司电话

### 地图导航
- 使用 `wx.openLocation` API
- 传递经纬度（网点）或地址（公司）

### 复制功能
- 使用 `wx.setClipboardData` API
- 支持复制网址和邮箱

## 样式设计

### 颜色方案
- 主色调：黄色 #FFD700
- 强调色：红色 #FF0000
- 背景色：浅灰 #F5F5F5
- 卡片背景：白色 #FFFFFF
- 语音播报背景：浅黄 #FFF8DC

### 字体大小
- 标题：36rpx（加粗）
- 副标题：32rpx（加粗）
- 正文：28rpx
- 辅助文字：24rpx

### 圆角和阴影
- 卡片圆角：16rpx
- 输入框圆角：36rpx
- 卡片阴影：0 2rpx 8rpx rgba(0, 0, 0, 0.05)

## 注意事项

1. **网点字段名称**：使用 `branchMobile` 而不是 `branchPhone`
2. **网点去重**：使用网点ID作为唯一标识
3. **搜索框清除按钮**：只在有内容时显示
4. **消息通知**：需要登录才能查看
5. **地图导航**：网点使用经纬度，公司地址需要地址解析
6. **页面顶部**：只显示微信原生胶囊按钮

## 文件结构

```
company-detail/
├── company-detail.js      # 页面逻辑
├── company-detail.wxml    # 页面结构
├── company-detail.wxss    # 页面样式
├── company-detail.json    # 页面配置
└── README.md             # 说明文档
```

## 依赖组件

- `banner-swiper` - 轮播图组件（/components/banner-swiper/banner-swiper）

## 开发者

- 开发时间：2024年
- 最后更新：2024年

## 版本历史

### v1.0.0
- 实现基础页面布局
- 实现5个标签页功能
- 实现网点查询和线路查询
- 实现消息通知功能
- 实现联系我们功能
